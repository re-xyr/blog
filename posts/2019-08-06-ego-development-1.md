---
title: 造个语言：Egolang（1）
description: 闲着没事想要造个（程序设计）语言。先从构思语言结构开始吧。
author: t532
date: Tue Aug 06 2019 21:02:43 GMT+0800 (GMT+08:00)
category: 开发
---

# 造个语言：Egolang（1）

## 构想的来源
期末复习的时候，突然冒出来一个想法：

> 造一个所有东西都是逆波兰表达式的语言。

感觉很有趣的样子，于是就写了几段代码~~然后人肉解释器~~试试看：

```
1 2 3 + - tostring output
// -> output ( tostring ( 1 - ( 2 + 3 ) ) )
// => -4
```

果不其然，看上去很反人类。那么改成波兰表达式可能会好一些？

```
output tostring - 1 + 2 3
// -> output ( tostring ( 1 - ( 2 + 3 ) ) )
// => -4
```

看起来正常多了。

这是个初步的想法，实现起来应该很容易。

哦对了还得起个名字，既然是波兰表达式就叫 **Pole** 好了。

~~然后这个点子就被我搁置到了考完~~

## 深入思考一下
波兰表达式的每个成员，只可能是*运算符*或*值*两类其中之一，并且运算符的元的数量是确定的。这两点使得波兰表达式非常简洁，不必添加括号之类冗余的符号规定运算顺序。

然而对于一门程序设计语言，这种简洁性也会大大拉低灵活性。如果只是如此实现，我们就得不到两个特性：*可调用值*和*变长参数列表*：

- 将函数视为可调用值，也就是 *first-class function* 思想，在现代语言中被广泛应用。这使得函数的使用有了更大的灵活性，~~也产生了 callback hell 等一众毒瘤写法~~。
- 变长参数列表，不用我说了，很好用。

## 改需求.jpg
怎么解决？改吧。

考虑向语言中加入括号 `()`，并且使表达式中所有成员的结果都为值（但有可调用与不可调用的分别）；

对于可调用值，可以在后面添加括号来表示调用；否则，表示访问值。括号中的表达式均为参数。这同时也解决了变长参数列表的问题。

语言的语法结构大概构思好了，接下来开始着手实现吧。

<Series next="/2019/08/07/ego-development-2/" />
